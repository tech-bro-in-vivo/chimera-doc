(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{511:function(t,s,n){"use strict";n.r(s);var a=n(3),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"qa-closesocket-object-object"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qa-closesocket-object-object"}},[t._v("#")]),t._v(" qa.closeSocket(Object object)")]),t._v(" "),n("p",[t._v("关闭WebSocket连接")]),t._v(" "),n("h2",{attrs:{id:"参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),n("h3",{attrs:{id:"object-object"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#object-object"}},[t._v("#")]),t._v(" Object object")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("属性")]),t._v(" "),n("th",[t._v("类型")]),t._v(" "),n("th",[n("div",{staticStyle:{width:"50px"}},[t._v("默认值")])]),t._v(" "),n("th",[n("div",{staticStyle:{width:"50px"}},[t._v("必填")])]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("code")]),t._v(" "),n("td",[t._v("number")]),t._v(" "),n("td",[t._v("1000（表示正常关闭连接）")]),t._v(" "),n("td",[t._v("否")]),t._v(" "),n("td",[t._v("数值表示关闭连接的状态号，表示连接被关闭的原因，参考"),n("a",{attrs:{href:"http://tools.ietf.org/html/rfc6455#section-7.4",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC 6455"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[t._v("reason")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td"),t._v(" "),n("td",[t._v("否")]),t._v(" "),n("td",[t._v("表示连接被关闭的原因的字符串，该字符串必须是不长于 123 字节的 UTF-8 文本（不是字符）。")])]),t._v(" "),n("tr",[n("td",[t._v("success")]),t._v(" "),n("td",[t._v("function")]),t._v(" "),n("td"),t._v(" "),n("td",[t._v("否")]),t._v(" "),n("td",[t._v("接口调用成功的回调函数")])]),t._v(" "),n("tr",[n("td",[t._v("fail")]),t._v(" "),n("td",[t._v("function")]),t._v(" "),n("td"),t._v(" "),n("td",[t._v("否")]),t._v(" "),n("td",[t._v("接口调用失败的回调函数")])]),t._v(" "),n("tr",[n("td",[t._v("complete")]),t._v(" "),n("td",[t._v("function")]),t._v(" "),n("td"),t._v(" "),n("td",[t._v("否")]),t._v(" "),n("td",[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),n("h2",{attrs:{id:"示例代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例代码"}},[t._v("#")]),t._v(" 示例代码")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("qa"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("connectSocket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.php'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注意这里有时序问题，")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如果 qa.connectSocket 还没回调 qa.onSocketOpen，而先调用 qa.closeSocket，那么就做不到关闭 WebSocket 的目的。")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//必须在 WebSocket 打开期间调用 qa.closeSocket 才能关闭。")]),t._v("\nqa"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onSocketOpen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  qa"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("closeSocket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nqa"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onSocketClose")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WebSocket 已关闭！'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);