<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快应用代码构成 | 快应用 (Light) 版</title>
    <meta name="description" content="快应用light版官方文档, 标准是由主流手机厂商组成的快应用联盟联合制定,其标准的诞生将在研发接口、能力接入、开发者服务等层面建设标准平台，以平台化的生态模式对个人开发者和企业开发者全品类开放。快应用具备传统 APP 完整的应用体验，无需安装、即点即用；覆盖 10 亿设备，与操作系统深度集成，探索新型应用场景。本章的内容为快应用代码构成">
    <link rel="icon" href="/quickapp.ico">
  <link rel="manifest" href="/manifest.json">
    <meta property="og:site_name" content="快应用 (Light) 版"><meta property="og:title" content="快应用代码构成"><meta property="og:type" content="website"><meta property="og:url" content="/framework/quickstart/code.html"><meta name="twitter:title" content="快应用代码构成"><meta name="twitter:url" content="/framework/quickstart/code.html"><meta name="twitter:card" content="summary_large_image"><meta name="keyword" content="快应用light版, quickapp, fastapp, 小程序, 原生应用, 即点即用快应用代码构成,快应用 (Light) 版">
    <link rel="preload" href="/assets/css/0.styles.dbb4866b.css" as="style"><link rel="preload" href="/assets/js/app.4d569d3f.js" as="script"><link rel="preload" href="/assets/js/4.79984d59.js" as="script"><link rel="preload" href="/assets/js/430.4c217a85.js" as="script"><link rel="preload" href="/assets/js/8.31dc05a6.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.dbb4866b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/quick-app-logo.2e96865f.png" alt="快应用 (Light) 版" class="logo"> <span class="site-name">快应用 (Light) 版</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/framework/" class="nav-link router-link-active">教程</a></div><div class="nav-item"><a href="/reference/" class="nav-link">框架</a></div><div class="nav-item"><a href="/component/" class="nav-link">组件</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/feedback/" class="nav-link">反馈</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/framework/" class="nav-link router-link-active">教程</a></div><div class="nav-item"><a href="/reference/" class="nav-link">框架</a></div><div class="nav-item"><a href="/component/" class="nav-link">组件</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/feedback/" class="nav-link">反馈</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>快速开始</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/framework/quickstart/introduction.html" class="sidebar-link">快应用(Light)介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/quickstart/introduction.html#快应用-light-是什么？" class="sidebar-link">快应用(Light)是什么？</a></li></ul></li><li><a href="/framework/quickstart/getstart.html" class="sidebar-link">开始开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/quickstart/getstart.html#安装开发工具" class="sidebar-link">安装开发工具</a></li><li class="sidebar-sub-header"><a href="/framework/quickstart/getstart.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/framework/quickstart/getstart.html#真机预览调试" class="sidebar-link">真机预览调试</a></li></ul></li><li><a href="/framework/quickstart/code.html" class="active sidebar-link">代码构成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/quickstart/code.html#json-配置" class="sidebar-link">JSON 配置</a></li><li class="sidebar-sub-header"><a href="/framework/quickstart/code.html#qxml-模板" class="sidebar-link">QXML 模板</a></li><li class="sidebar-sub-header"><a href="/framework/quickstart/code.html#样式" class="sidebar-link">样式</a></li><li class="sidebar-sub-header"><a href="/framework/quickstart/code.html#js-逻辑交互" class="sidebar-link">JS 逻辑交互</a></li></ul></li><li><a href="/framework/quickstart/framework.html" class="sidebar-link">运行环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/quickstart/framework.html#渲染层和逻辑层" class="sidebar-link">渲染层和逻辑层</a></li></ul></li><li><a href="/framework/quickstart/transform.html" class="sidebar-link">小程序转快应用light版</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/quickstart/transform.html#使用方法" class="sidebar-link">使用方法</a></li><li class="sidebar-sub-header"><a href="/framework/quickstart/transform.html#参数说明" class="sidebar-link">参数说明</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/framework/app-service" class="sidebar-heading clickable"><span>逻辑层</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/framework/view" class="sidebar-heading clickable"><span>渲染层</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>自定义组件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>功能模块</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="快应用代码构成"><a href="#快应用代码构成" class="header-anchor">#</a> 快应用代码构成</h1> <p>​ 一个快应用项目包含了下面四种不同类型的基本文件:</p> <ul><li>.json 后缀的配置文件</li> <li>.qxml 后缀的模板文件</li> <li>.css 后缀的样式文件</li> <li>.js 后缀的脚本逻辑文件</li></ul> <h2 id="json-配置"><a href="#json-配置" class="header-anchor">#</a> JSON 配置</h2> <p>JSON 是一种数据格式。在快应用中，JSON 主要用来项目的静态配置。</p> <p>项目根目录有一个 <code>app.json</code> ，各页面路径下也会有 <code>json</code> 文件，我们依次来说明一下它们的用途。</p> <h3 id="全局配置-app-json"><a href="#全局配置-app-json" class="header-anchor">#</a> 全局配置 app.json</h3> <p><code>app.json</code> 是当前快应用的全局配置，包括了快应用的所有页面路径、窗口样式、底部 tab 等。 项目里边的 <code>app.json</code> 配置内容如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pages/detail/detail&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;window&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;quickApp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这几个配置项的大概含义如下:</p> <ol><li><code>pages</code>字段 —— 用于定义快应用所有页面的路径。</li> <li><code>window</code>字段 —— 配置快应用所有页面的标题，文字颜色等。</li></ol> <p>其他配置项细节可以参考文档 <a href="/framework/config.html">快应用的配置 app.json</a> 。</p> <h3 id="页面配置-page-json"><a href="#页面配置-page-json" class="header-anchor">#</a> 页面配置 page.json</h3> <p>这里的 <code>page.json</code> 代指各快应用页面的配置，文件名取决于各页面名。<code>app.json</code> 中定义的 <code>window</code> 配置对所有页面都起作用，如果想针对某个页面做特殊的配置，可以通过页面配置 <code>page.json</code> 。 <code>page.json</code> 中的配置项优先级高于 <code>app.json</code> 的。</p> <p>其他配置项细节可以参考文档 <a href="/framework/config.html#页面配置">页面配置</a> 。</p> <h3 id="json-注意事项"><a href="#json-注意事项" class="header-anchor">#</a> JSON 注意事项</h3> <ul><li>JSON 的 Key 必须包裹在一个双引号中，漏写双引号或者把双引号写成单引号都会导致报错。</li> <li>JSON 文件中无法使用注释。</li> <li>JSON 文件内容不可为空，如果没有配置项，可以保留一个 <code>{}</code></li></ul> <p>JSON 的值只能是以下几种数据格式，其他任何格式都会触发报错，例如 undefined。</p> <ol><li>数字，包含浮点数和整数</li> <li>字符串，需要包裹在双引号中</li> <li>Bool 值，true 或者 false</li> <li>数组，需要包裹在方括号中 []</li> <li>对象，需要包裹在大括号中 {}</li> <li>Null</li></ol> <h2 id="qxml-模板"><a href="#qxml-模板" class="header-anchor">#</a> QXML 模板</h2> <p>网页开发采用的是 HTML + CSS + JS 这样的组合，其中 <code>HTML</code> 是用来描述当前这个页面的结构，<code>CSS</code> 用来描述页面的样式，<code>JS</code> 用于编写页面逻辑和交互。</p> <p>快应用中也是类似的，不同的是，快应用中用 <code>QXML</code> 替代了<code>HTML</code>。打开一个 <code>QXML</code> 文件示例:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userinfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">qa:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{!hasUserInfo}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取头像昵称<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">qa:</span>else</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{userInfo.avatarUrl}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">background-size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{userInfo.nickName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>motto<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{motto}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>QXML</code> 的写法和 <code>HTML</code> 非常相似，由标签、属性等等构成。两者的差异主要下面几个：</p> <ol><li><p>标签不同</p> <p>快应用中封装了一套不同于网页的基本组件。提供了地图、视频、音频等组件能力。体现在 <code>QXML</code> 中就是不同于 <code>HTML</code> 的标签名，如 <code>view</code>, <code>button</code>, <code>text</code>, <code>map</code>, <code>picker</code> 等。</p> <p>更多详细的组件讲述参考下个章节 <a href="/framework/quickstart/framework.html">快应用的能力</a></p></li> <li><p><code>QXML</code> 带有指令系统和表达式绑定</p> <p>详细的文档可以参考 <a href="/reference/qxml/">QXML</a></p></li> <li><p><code>QXML</code> 不允许加载 js</p></li></ol> <h2 id="样式"><a href="#样式" class="header-anchor">#</a> 样式</h2> <p>和网页的 <code>CSS</code> 大体一致，也有一些扩充和修改。</p> <ol><li><p>支持新的尺寸单位 rpx</p></li> <li><p>全局的样式和局部样式。 <code>app.css</code> 作为全局样式，会作用于当前快应用的所有页面，局部页面样式 <code>page.css</code> 仅对当前页面生效，自定义组件 css 仅对该组件生效。</p></li></ol> <h2 id="js-逻辑交互"><a href="#js-逻辑交互" class="header-anchor">#</a> JS 逻辑交互</h2> <p>快应用采用 JS 来编写逻辑交互。用于响应用户操作、获取网络数据、处理逻辑计算等等。</p> <p>举一个响应点击事件的例子。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们希望点击 <code>button</code> 按钮的时候，界面上 <code>message</code> 的值显示成 <code>&quot;Hello QuickApp&quot;</code>，我们可以在 JS 文件里边声明 <code>handleClick</code> 方法来响应这次点击操作：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> 'Hello World
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">handleClick</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">&quot;Hello QuickApp&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>JS 文件和 QXML 文件通过 <code>bindtap=&quot;handleClick&quot;</code> 这个属性声明产生关联。详情可以参考 <a href="/framework/view/event.html">QXML - 事件</a> 。</p> <p>另外，不同于浏览器端的 JS ， 快应用提供了更为丰富的 JS API，用于获取用户信息、本地存储、支付等等。详情可以参考 <a href="/framework/app-service/api.html">快应用的 API</a> 。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"></p><div class="prev page-navigator">
      ←
      <div class="navigation-mark"><span class="navigation-flag">Previous</span> <a href="/framework/quickstart/getstart.html" class="prev router-tag" style="pointer-events:none;">开始开发</a></div></div> <div class="next page-navigator"><div class="navigation-mark"><span class="navigation-flag">Next</span> <a href="/framework/quickstart/framework.html" class="next router-tag" style="pointer-events:none;">运行环境</a></div>→
    </div> <p></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4d569d3f.js" defer></script><script src="/assets/js/4.79984d59.js" defer></script><script src="/assets/js/430.4c217a85.js" defer></script><script src="/assets/js/8.31dc05a6.js" defer></script>
  </body>
</html>
